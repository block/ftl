"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[860],{4205:(e,t,r)=>{r.d(t,{R:()=>l,x:()=>o});var n=r(4700);const a={},s=n.createContext(a);function l(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),n.createElement(s.Provider,{value:t},e.children)}},5624:(e,t,r)=>{r.d(t,{A:()=>T});var n=r(4700),a=r(3372),s=r(6128),l=r(3263),o=r(7974),i=r(6605),u=r(1394),c=r(9829);function d(e){return n.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function f(e){const{values:t,children:r}=e;return(0,n.useMemo)((()=>{const e=t??function(e){return d(e).map((e=>{let{props:{value:t,label:r,attributes:n,default:a}}=e;return{value:t,label:r,attributes:n,default:a}}))}(r);return function(e){const t=(0,u.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,r])}function p(e){let{value:t,tabValues:r}=e;return r.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:r}=e;const a=(0,l.W6)(),s=function(e){let{queryString:t=!1,groupId:r}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:t,groupId:r});return[(0,i.aZ)(s),(0,n.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(a.location.search);t.set(s,e),a.replace({...a.location,search:t.toString()})}),[s,a])]}function m(e){const{defaultValue:t,queryString:r=!1,groupId:a}=e,s=f(e),[l,i]=(0,n.useState)((()=>function(e){let{defaultValue:t,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=r.find((e=>e.default))??r[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:s}))),[u,d]=h({queryString:r,groupId:a}),[m,g]=function(e){let{groupId:t}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,s]=(0,c.Dv)(r);return[a,(0,n.useCallback)((e=>{r&&s.set(e)}),[r,s])]}({groupId:a}),b=(()=>{const e=u??m;return p({value:e,tabValues:s})?e:null})();(0,o.A)((()=>{b&&i(b)}),[b]);return{selectedValue:l,selectValue:(0,n.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);i(e),d(e),g(e)}),[d,g,s]),tabValues:s}}var g=r(7582);const b={tabList:"tabList_HKUW",tabItem:"tabItem_l9_f"};var v=r(7968);function x(e){let{className:t,block:r,selectedValue:n,selectValue:l,tabValues:o}=e;const i=[],{blockElementScrollPositionUntilNextRender:u}=(0,s.a_)(),c=e=>{const t=e.currentTarget,r=i.indexOf(t),a=o[r].value;a!==n&&(u(t),l(a))},d=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const r=i.indexOf(e.currentTarget)+1;t=i[r]??i[0];break}case"ArrowLeft":{const r=i.indexOf(e.currentTarget)-1;t=i[r]??i[i.length-1];break}}t?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":r},t),children:o.map((e=>{let{value:t,label:r,attributes:s}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:n===t?0:-1,"aria-selected":n===t,ref:e=>{i.push(e)},onKeyDown:d,onClick:c,...s,className:(0,a.A)("tabs__item",b.tabItem,s?.className,{"tabs__item--active":n===t}),children:r??t},t)}))})}function y(e){let{lazy:t,children:r,selectedValue:s}=e;const l=(Array.isArray(r)?r:[r]).filter(Boolean);if(t){const e=l.find((e=>e.props.value===s));return e?(0,n.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:l.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==s})))})}function E(e){const t=m(e);return(0,v.jsxs)("div",{className:(0,a.A)("tabs-container",b.tabList),children:[(0,v.jsx)(x,{...t,...e}),(0,v.jsx)(y,{...t,...e})]})}function T(e){const t=(0,g.A)();return(0,v.jsx)(E,{...e,children:d(e.children)},String(t))}},6296:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>u,default:()=>p,frontMatter:()=>i,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"reference/egress","title":"Egress","description":"Egress","source":"@site/docs/reference/egress.md","sourceDirName":"reference","slug":"/reference/egress","permalink":"/ftl/docs/reference/egress","draft":false,"unlisted":false,"editUrl":"https://github.com/block/ftl/tree/main/docs/docs/reference/egress.md","tags":[],"version":"current","sidebarPosition":19,"frontMatter":{"sidebar_position":19,"title":"Egress","description":"Egress"},"sidebar":"tutorialSidebar","previous":{"title":"Workload Identity","permalink":"/ftl/docs/reference/workloadidentity"}}');var a=r(7968),s=r(4205),l=r(5624),o=r(7178);const i={sidebar_position:19,title:"Egress",description:"Egress"},u="Egress",c={},d=[{value:"Examples",id:"examples",level:2}];function f(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"egress",children:"Egress"})}),"\n",(0,a.jsx)(t.p,{children:"FTL requires verbs to declare any outbound egress they wish to do. At present no enforcement is done, however eventually\nFTL will use this to provision appropriate Istio policies when running on kube."}),"\n",(0,a.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,a.jsx)(t.p,{children:"Examples of defining egress targets in different languages:"}),"\n","\n",(0,a.jsxs)(l.A,{groupId:"languages",children:[(0,a.jsx)(o.A,{value:"go",label:"Go",default:!0,children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-go",children:'package example\n\nimport (\n"context"\n\n"github.com/block/ftl/go-runtime/ftl"\n)\n//ftl:verb export\n//ftl:egress url="https://example.com"\nfunc Fixed(ctx context.Context, url ftl.EgressTarget) (string, error) {\n targetUrl := url.GetString(ctx)  // Equal https://example.com\n // Do HTTP requests with targetUrl\n}\n\n// For now in go you must explicitly declare config items used in egress urls\ntype Url = flt.Config[string]\n\n//ftl:verb export\n//ftl:egress url="${url}"\nfunc FromConfig(ctx context.Context, url ftl.EgressTarget) (string, error) {\n  // This automatically creates a config item called url in the schema\n\ttargetUrl := url.GetString(ctx) // Equal to the value of the URL config item\n\t// Do HTTP requests with targetUrl\n}\n\n'})})}),(0,a.jsx)(o.A,{value:"kotlin",label:"Kotlin",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-kotlin",children:'import xyz.block.ftl.Egress\nimport xyz.block.ftl.Verb\nimport java.net.URL\n\n@Verb\nfun fixed(@Egress("https//example.com") url: String) {\n    // do HTTP requests with url\n}\n\n@Verb\nfun fromConfig(@Egress("${url}") url: String) {\n    // This automatically creates a config item called url in the schema\n}\n\n@Verb\nfun fromConfigAndURLType(@Egress("http://${host}:${port}") url: URL) {\n    // This automatically creates a config item called host and port in the schema\n}\n'})})}),(0,a.jsx)(o.A,{value:"java",label:"Java",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'import xyz.block.ftl.Egress;\nimport xyz.block.ftl.Verb;\nimport java.net.URL;\n\n@Verb\npublic void fixed(String @Egress("https//example.com") url) {\n    // do HTTP requests with url\n}\n\n@Verb\npublic void fromConfig(String @Egress("${url}") url) {\n    // This automatically creates a config item called url in the schema\n}\n\n@Verb\npublic void fromConfigAndURLType(URL @Egress("http://${host}:${port}") url) {\n    // This automatically creates a config item called host and port in the schema\n}\n'})})})]})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(f,{...e})}):f(e)}},7178:(e,t,r)=>{r.d(t,{A:()=>l});r(4700);var n=r(3372);const a={tabItem:"tabItem_Sb6x"};var s=r(7968);function l(e){let{children:t,hidden:r,className:l}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,n.A)(a.tabItem,l),hidden:r,children:t})}}}]);