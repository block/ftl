load("@io_bazel_rules_go//go:def.bzl", "go_library")

go_library(
    name = "k8sscaling",
    srcs = ["k8s_scaling.go"],
    importpath = "github.com/block/ftl/backend/provisioner/scaling/k8sscaling",
    visibility = ["//visibility:public"],
    deps = [
        "//backend/protos/xyz/block/ftl/v1/ftlv1connect",
        "//backend/provisioner/scaling",
        "//common/schema",
        "//common/slices",
        "//internal/key",
        "//internal/log",
        "//internal/rpc",
        "@com_connectrpc_connect//:connect",
        "@com_github_alecthomas_errors//:errors",
        "@com_github_alecthomas_types//optional",
        "@com_github_puzpuzpuz_xsync_v3//:xsync",
        "@io_istio_api//security/v1:security",
        "@io_istio_api//type/v1beta1",
        "@io_istio_client_go//pkg/apis/security/v1:security",
        "@io_istio_client_go//pkg/clientset/versioned",
        "@io_k8s_api//apps/v1:apps",
        "@io_k8s_api//core/v1:core",
        "@io_k8s_apimachinery//pkg/api/errors",
        "@io_k8s_apimachinery//pkg/apis/meta/v1:meta",
        "@io_k8s_apimachinery//pkg/runtime",
        "@io_k8s_apimachinery//pkg/runtime/serializer",
        "@io_k8s_client_go//kubernetes",
        "@io_k8s_client_go//kubernetes/typed/core/v1:core",
        "@io_k8s_client_go//rest",
        "@io_k8s_client_go//tools/clientcmd",
        "@org_golang_x_exp//maps",
    ],
)
